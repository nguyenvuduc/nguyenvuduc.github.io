"use strict";(self.webpackChunkdnguyen_portfolio=self.webpackChunkdnguyen_portfolio||[]).push([[468],{6468:(_,d,u)=>{u.r(d),u.d(d,{Camera:()=>h,CameraWeb:()=>p});var l=u(5861),m=u(2726),s=u(5961);class p extends m.Uw{getPhoto(e){var t=this;return(0,l.Z)(function*(){return new Promise(function(){var n=(0,l.Z)(function*(i,r){if(e.webUseInput||e.source===s.oK.Photos)t.fileInputExperience(e,i);else if(e.source===s.oK.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",function(){var o=(0,l.Z)(function*(c){0===c.detail?t.fileInputExperience(e,i):t.cameraExperience(e,i,r)});return function(c){return o.apply(this,arguments)}}())}else t.cameraExperience(e,i,r)});return function(i,r){return n.apply(this,arguments)}}())})()}pickImages(e){var t=this;return(0,l.Z)(function*(){return new Promise(function(){var n=(0,l.Z)(function*(i){t.multipleFileInputExperience(i)});return function(i){return n.apply(this,arguments)}}())})()}cameraExperience(e,t,n){var i=this;return(0,l.Z)(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===s.GW.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",function(){var a=(0,l.Z)(function*(o){const c=o.detail;null===c?n(new m.xz("User cancelled photos app")):c instanceof Error?n(c):t(yield i._getCameraPhoto(c,e)),r.dismiss(),document.body.removeChild(r)});return function(o){return a.apply(this,arguments)}}()),r.present()}catch{i.fileInputExperience(e,t)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),i.fileInputExperience(e,t)})()}fileInputExperience(e,t){let n=document.querySelector("#_capacitor-camera-input");const i=()=>{var r;null===(r=n.parentNode)||void 0===r||r.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",r=>{const a=n.files[0];let o="jpeg";if("image/png"===a.type?o="png":"image/gif"===a.type&&(o="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const c=new FileReader;c.addEventListener("load",()=>{if("dataUrl"===e.resultType)t({dataUrl:c.result,format:o});else if("base64"===e.resultType){const f=c.result.split(",")[1];t({base64String:f,format:o})}i()}),c.readAsDataURL(a)}else t({webPath:URL.createObjectURL(a),format:o}),i()})),n.accept="image/*",n.capture=!0,e.source===s.oK.Photos||e.source===s.oK.Prompt?n.removeAttribute("capture"):e.direction===s.GW.Front?n.capture="user":e.direction===s.GW.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(e){let t=document.querySelector("#_capacitor-camera-input-multiple");t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",i=>{const r=[];for(let a=0;a<t.files.length;a++){const o=t.files[a];let c="jpeg";"image/png"===o.type?c="png":"image/gif"===o.type&&(c="gif"),r.push({webPath:URL.createObjectURL(o),format:c})}e({photos:r}),(()=>{var i;null===(i=t.parentNode)||void 0===i||i.removeChild(t)})()})),t.accept="image/*",t.click()}_getCameraPhoto(e,t){return new Promise((n,i)=>{const r=new FileReader,a=e.type.split("/")[1];"uri"===t.resultType?n({webPath:URL.createObjectURL(e),format:a,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{const o=r.result;n("dataUrl"===t.resultType?{dataUrl:o,format:a,saved:!1}:{base64String:o.split(",")[1],format:a,saved:!1})},r.onerror=o=>{i(o)})})}checkPermissions(){var e=this;return(0,l.Z)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw e.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw e.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var e=this;return(0,l.Z)(function*(){throw e.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var e=this;return(0,l.Z)(function*(){throw e.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var e=this;return(0,l.Z)(function*(){throw e.unavailable("Not implemented on web.")})()}}const h=new p}}]);